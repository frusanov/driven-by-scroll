/**
   * @license
   * author: Feodor Rusanov <f.rusanov@gmail.com> (https://feodor.me)
   * DrivenByScroll.js v1.0.0-alpha
   * Released under the MIT license.
   */
var DrivenByScroll=function(){"use strict";function t(t){return 0>t?0:1<t?1:t}var i=function(){function i(t,e){var o;this.top=0,this.bottom=0,this.height=0,this.enterPosition=0,this.exitPosition=0,this.actionAreaHeight=0,this.stepPerPixel=0,this.priority=1,this.$element=t,this.callback=e,this.calcBaseSizes(),this.scrollHandler(),null===(o=i.resizeObserver)||void 0===o||o.observe(this.$element),i.observed.push(this)}return i.prototype.destroy=function(){var t=i.observed.indexOf(this);i.observed.splice(t,1)},i.prototype.calcBaseSizes=function(){var t=this.$element.getBoundingClientRect();this.height=t.height,this.top=Math.round(t.top+i.viewPortTopLine),this.bottom=Math.round(this.top+this.height),this.enterPosition=this.top-i.windowHeight,this.exitPosition=this.bottom,this.actionAreaHeight=this.exitPosition-this.enterPosition,this.stepPerPixel=1/this.actionAreaHeight},i.prototype.calculateInstancePriority=function(){var t=0;this.top>i.viewPortTopLine&&this.bottom>i.viewPortTopLine?t=(this.top-i.viewPortTopLine)/i.windowHeight:this.bottom<i.viewPortTopLine&&(t=(i.viewPortTopLine-this.bottom)/i.windowHeight),5<(t=Math.round(t))&&(t=5),this.priority=t},i.prototype.scrollHandler=function(){if(!(this.priority>i.currentPriority)){var e=t((i.viewPortTopLine-this.bottom+this.actionAreaHeight)/this.actionAreaHeight),o=t((i.viewPortTopLine-this.bottom+this.height)/(this.height-i.windowHeight));this.callback({instance:this,viewPortTopLine:i.viewPortTopLine,viewPortBottomLine:i.viewPortBottomLine,fromEnterToOut:e,fromEnterToMiddle:t(2*e),fromTopToBottom:o}),this.calculateInstancePriority()}},i.start=function(){var t,e,o,r,n;i.resizeObserver=new ResizeObserver((t=i.onResize,void 0===(e=500)&&(e=300),function(){var i=this,s=arguments;o?(clearTimeout(r),r=setTimeout((function(){Date.now()-n>=e&&(t.apply(i,s),n=Date.now())}),Math.max(e-(Date.now()-n),0))):(t.apply(i,s),n=Date.now(),o=!0)})),globalThis.addEventListener("scroll",i.onScroll),i.onScroll(),i.onResize()},i.stop=function(){delete i.resizeObserver,globalThis.removeEventListener("scroll",i.onScroll)},i.destroyAll=function(){i.observed.splice(0,i.observed.length)},i.onResize=function(){i.lastResize=Date.now(),i.windowHeight=Math.round(globalThis.innerHeight),i.observed.forEach((function(t){return t.calcBaseSizes()})),i.onScroll()},i.onScroll=function(){if(!(1e3/i.maxFPS>Date.now()-i.lastScroll)){i.lastScroll=Date.now();var t=Math.round(globalThis.pageYOffset),e=Math.round(document.documentElement.clientTop);i.viewPortTopLine=t-e,i.viewPortBottomLine=i.viewPortTopLine+i.windowHeight,i.observed.forEach((function(t){t.scrollHandler()})),i.nextGlobalPriority()}},i.nextGlobalPriority=function(){5>i.currentPriority?i.currentPriority++:i.currentPriority=1},i.currentPriority=1,i.windowHeight=globalThis.innerHeight,i.viewPortTopLine=globalThis.scrollY,i.viewPortBottomLine=i.viewPortTopLine+i.windowHeight,i.maxFPS=60,i.observed=[],i.lastResize=Date.now(),i.lastScroll=Date.now(),i}();return i.start(),i}();
//# sourceMappingURL=index.min.js.map
