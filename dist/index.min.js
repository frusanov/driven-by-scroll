/**
   * @license
   * author: Feodor Rusanov <f.rusanov@gmail.com> (https://feodor.me)
   * DrivenByScroll.js v1.0.0-alpha2
   * Released under the MIT license.
   */
var DrivenByScroll=function(){"use strict";function e(e){return 0>e?0:1<e?1:e}var t=function(e,t){var i,o,n;return void 0===t&&(t=300),function(){var r=this,s=arguments;i?(clearTimeout(o),o=setTimeout((function(){Date.now()-n>=t&&(e.apply(r,s),n=Date.now())}),Math.max(t-(Date.now()-n),0))):(e.apply(r,s),n=Date.now(),i=!0)}},i=function(){function i(e,t){this.top=0,this.bottom=0,this.height=0,this.enterPosition=0,this.exitPosition=0,this.actionAreaHeight=0,this.stepPerPixel=0,this.isVisable=!1,this.$element=e,this.callback=t,this.calcBaseSizes(),this.scrollHandler(),i.resizeObserver.observe(this.$element),i.intersectionObserver.observe(this.$element),i.observed.push(this),i.onScroll()}return i.prototype.destroy=function(){var e=i.observed.indexOf(this);i.observed.splice(e,1)},i.prototype.calcBaseSizes=function(){var e=this.$element.getBoundingClientRect();this.height=e.height,this.top=Math.round(e.top+i.viewPortTopLine),this.bottom=Math.round(this.top+this.height),this.enterPosition=this.top-i.windowHeight,this.exitPosition=this.bottom,this.actionAreaHeight=this.exitPosition-this.enterPosition,this.stepPerPixel=1/this.actionAreaHeight},i.prototype.scrollHandler=function(){if(this.isVisable){var t=e((i.viewPortTopLine-this.bottom+this.actionAreaHeight)/this.actionAreaHeight),o=e((i.viewPortTopLine-this.bottom+this.height)/(this.height-i.windowHeight));this.callback({instance:this,viewPortTopLine:i.viewPortTopLine,viewPortBottomLine:i.viewPortBottomLine,fromEnterToOut:t,fromEnterToMiddle:e(2*t),fromTopToBottom:o})}},i.start=function(){i.resizeObserver=new ResizeObserver(t(i.onResize,500)),i.intersectionObserver=new IntersectionObserver(i.onIntersect),window.addEventListener("scroll",i.onScroll),i.onScroll(),i.onResize()},i.stop=function(){delete i.resizeObserver,delete i.intersectionObserver,window.removeEventListener("scroll",i.onScroll)},i.destroyAll=function(){i.observed.splice(0,i.observed.length)},i.onResize=function(){i.lastResize=Date.now(),i.windowHeight=Math.round(window.innerHeight),i.observed.forEach((function(e){return e.calcBaseSizes()})),i.onScroll()},i.onIntersect=function(e){e.forEach((function(e){var t=e.isIntersecting,o=e.target,n=i.observed.find((function(e){return e.$element===o}));n.isVisable=t,t&&(null==n||n.calcBaseSizes())}))},i.windowHeight=window.innerHeight,i.viewPortTopLine=window.scrollY,i.viewPortBottomLine=i.viewPortTopLine+i.windowHeight,i.maxFPS=60,i.observed=[],i.lastResize=Date.now(),i.lastScroll=Date.now(),i.onScroll=t((function(){var e=Math.round(window.pageYOffset),t=Math.round(document.documentElement.clientTop);i.viewPortTopLine=e-t,i.viewPortBottomLine=i.viewPortTopLine+i.windowHeight,i.observed.forEach((function(e){e.scrollHandler()}))}),1e3/i.maxFPS),i}();return i.start(),i}();
//# sourceMappingURL=index.min.js.map
